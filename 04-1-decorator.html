<section id="decorator" data-background="#fecc99">

  <section>
    <h2>Decorator</h2>
  </section>

  <section>
    <h3>Présentation</h3>
    <p>
      Le pattern Decorator permet d'ajouter des comportements sur une classe en évitant d'utiliser l'héritage.
      Cela peut être intéressant lorsque l'utilisation de l'<strong>héritage devient trop complexe</strong> (nombre de
      classes trop important).
    </p>
    <a href="https://viewer.diagrams.net/?tags=%7B%7D&lightbox=1&highlight=0000ff&edit=_blank&layers=1&nav=1&title=decorator&dark=auto#Uhttps%3A%2F%2Fdrive.google.com%2Fuc%3Fid%3D15ITNP6geB4k3DjAA1PENwCZbb_m9pUbH%26export%3Ddownload" target="_blank">
      <img src="/assets/images/decorator.png" alt="Decorator">
    </a>
    <footer>
      <a href="https://refactoring.guru/design-patterns/decorator" target="_blank" class="info">refactoring.guru</a>
    </footer>
  </section>

  <section>
    <h3>Présentation</h3>
    <img src="/assets/images/decorator-schema.png" alt="Decorator">
    <img src="/assets/images/decorator-sequence-diagram.png" alt="Diagramme de séquence Decorator">
  </section>

  <section>
    <h3>Exemple théorique</h3>
    <p>
      Dans cet exemple, nous allons utiliser le design pattern Decorator pour développer les armes pour un jeu vidéo.
      L'objectif est de pouvoir dynamiquement ajouter dans le code des pouvoirs aux armes pour augmenter leur puissance.
    </p>
    <img src="/assets/images/decorator-weapon.png" alt="Decorator Weapon">
    <footer>
      <a href="/assets/files/code_examples.zip" class="info">Télécharger le code source des exemples</a>
    </footer>
  </section>

  <section>
    <h3>Decorator dans le framework Symfony</h3>
    <p>
      Les services de Symfony utilisent le design pattern Decorator pour ajouter des fonctionnalités à un service :
    </p>
    <pre><code class="language-yaml"># config/services.yaml
services:
  App\Mailer: ~
  App\DecoratingMailer:
    decorates: App\Mailer</code></pre>
    <footer>
      <a href="https://symfony.com/doc/current/service_container/service_decoration.html" target="_blank" class="info">
        Symfony : How to Decorate Services
      </a>
    </footer>
  </section>

  <section>
    <h3>Decorator dans l'ORM Doctrine</h3>
    <p>
      L'ORM Doctrine permet d'utiliser le design pattern Decorator au sein des entités liées à la base de données :
    </p>
    <pre><code class="language-php">// create a new concrete component
$c = new ConcreteComponent();
$c->setName('Test Component 1');
$em->persist($c); // assigned unique ID = 1

// create a new concrete decorator
$c = new ConcreteComponent();
$c->setName('Test Component 2');

$d = new ConcreteDecorator($c);
$d->setSpecial('Really');
$em->persist($d);
// assigns c as unique ID = 2, and d as unique ID = 3

$em->flush();

echo $d->getName();
// prints: [Really] Decorated Test Component 2</code></pre>
    <footer>
      <a href="https://www.doctrine-project.org/projects/doctrine-orm/en/3.3/cookbook/decorator-pattern.html" target="_blank" class="info">
        Doctrine : Persisting the Decorator Pattern
      </a>
    </footer>
  </section>

  <section>
    <h3>Exercice</h3>
    <p>
      Écrire le code source d'une librairie permettant de construire des voitures.
      Les voitures pourront avoir plusieurs options (GPS, climatisation...) qui feront augmenter le coût du véhicule.
    </p>
    <div class="instructions">
      <ol>
        <li>Créer le diagramme de classe UML</li>
        <li>Écrire le code source correspondant</li>
      </ol>
    </div>
  </section>

</section>
